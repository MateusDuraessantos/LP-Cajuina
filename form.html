<!DOCTYPE html>
<html>
<head>
    <title>Ebook Tendência Benefícios</title>
    <!-- Google Tag Manager (parte do head) -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MSKBQ9FX');</script>
    <!-- Fim do Google Tag Manager (parte do head) -->
</head>
<style>
body {
    font-family: Arial, sans-serif;
}

.container {
    max-width: 400px;
    margin: 0 auto;
    padding: 20px;
    border-radius: 10px;
    background-color: #FF7500;
}

.form-group {
    margin-bottom: 10px;
}

h1,
label {
    color: #FFFFFF;
}

input[type="text"],
input[type="email"],
input[type="tel"],
select {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 10px;
    box-sizing: border-box;
}

input::placeholder{
    color:black;
}

.sc-button {
    background-color: #59D359;
    border-color: #59D359;
    border-radius: 10px;
    border-style: solid;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    color: #FFFFFF;
    font-family: Inter, Arial, Helvetica, sans-serif;
    font-size: 16px;
    line-height: normal;
    padding: 15px 30px;
    width: 100%;
    font-weight: 600;
    margin: 20px 0px 0px 0px;
    cursor: pointer;
    display: block;
}


</style>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSKBQ9FX" height="0" width="0" style="display: none;visibility:hidden"></iframe></noscript>
<!-- Fim do Google Tag Manager (noscript) -->
<!-- Meta Pixel Code do Facebook -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '7360381497366216');
    fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display: none" src="https://www.facebook.com/tr?id=7360381497366216&ev=PageView&noscript=1" /></noscript>
<!-- End Meta Pixel Code do Facebook -->
    
<div class="container">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>

    <div class="topoform">
        <div style="text-align:center;font-size:22px;padding:20px 0px;color:#fff;font-weight:600;border-radius:20px 20px 0px 0px">
            Preencha o formulário <br> para baixar o nosso e-book gratuito
        </div>
    </div>
    <h1></h1>
    <label for="nome">Qual é o seu nome?</label>
    <input type="text" id="nome" name="nome" required="" placeholder="Digite seu nome"><br><br>

    <label for="empresa">Qual é a sua empresa?</label>
    <input type="text" id="empresa" name="empresa" required="" placeholder="Digite a empresa que você trabalha"><br><br>

    <label for="cargo__select">Qual é o seu cargo?</label>
    <select id="cargo__select" name="cargo" required="">
        <option value="" placeholder="Clique aqui para selecionar uma opção">Clique aqui para selecionar uma opção</option>
        <option value="Estagiário">Estagiário</option>
        <option value="Assistente">Assistente</option>
        <option value="Analista">Analista</option>
        <option value="Coordenador/gerente">Coordenador/gerente</option>
        <option value="Sócio/Diretor">Sócio/Diretor</option>
    </select><br><br>

    <label for="email">Qual é o seu email?</label>
    <input type="email" id="email" name="email" required="" placeholder="Digite aqui seu email corporativo"><br><br>

    <label for="area__select">Em qual área você trabalha?</label>
    <select id="area__select" name="area" required="">
        <option value="">Clique aqui para selecionar uma opção</option>
        <option value="RH">RH</option>
        <option value="Compras">Compras</option>
        <option value="Financeiro/Contabilidade">Financeiro/Contabilidade</option>
        <option value="Administrativo">Administrativo</option>
        <option value="Outros">Outros</option>
    </select><br><br>

        <label for="num_funcionarios">Quantos funcionários tem a sua empresa?</label>
    <input type="text" id="num_funcionarios" name="num_funcionarios" required="" placeholder="Digite o número de funcionários">
    <br><br>

    <label for="desafio_empresa__select">Qual é o seu maior desafio?</label>
    <select id="desafio_empresa__select" name="desafio_empresa" required="">
        <option value="">Escolha a opção</option>
        <option value="Atração e seleção">Atração e seleção</option>
        <option value="Retenção de colaboradores">Retenção de colaboradores</option>
        <option value="Desenvolvimento e treinamento">Desenvolvimento e treinamento</option>
        <option value="Plano de carreira">Plano de carreira</option>
        <option value="Cultura corporativa">Cultura corporativa</option>
        <option value="Reduzir os custos com RH">Reduzir os custos com RH</option>
        <option value="Otimizar o tempo do meu time de RH">Otimizar o tempo do meu time de RH</option>
    </select><br><br>

    <label for="telefone">Qual é o seu telefone?</label>
    <input type="tel" id="telefone" name="telefone" required="" placeholder="(xx) 00000-0000"><br><br>
    <input data-hash="003/001-001.059:018;001" type="submit" value="Quero baixar" id="submitButton" class="sc-button">
</div>
<!-- Google Tag Manager (evento de clique no botão) -->
<script>
    document.getElementById("submitButton").addEventListener("click", function () {
        // Registre o evento de clique no botão "Quero baixar"
        dataLayer.push({
            'event': 'formSubmission',
            'formType': 'Webinar Engajamento colaborador'
        });
    });
</script>
<div class="termos" style="text-align:center; padding-bottom:20px; color:#FFFFFF">
    <br> A Caju precisa dos seus dados para enviar informações sobre produtos e serviços, além de conteúdos que podem
    te interessar. Você pode deixar de receber essas comunicações quando quiser. Para obter mais informações, veja
    nossa <a href="https://www.caju.com.br/privacidade#:~:text=A%20Caju%20protege%20os%20direitos,com%20o%20disposto%20nesta%20Pol%C3%ADtica." style="color:#F08787">Política de Privacidade</a>.
</div>
<script>
    // Função para obter parâmetros UTM da URL
    function getUTMParameters() {
        const urlParams = new URLSearchParams(window.location.search);
        const utmParameters = {};

        utmParameters['str_utm_source'] = urlParams.get('utm_source') || '';
        utmParameters['str_utm_medium'] = urlParams.get('utm_medium') || '';
        utmParameters['str_utm_campaign'] = urlParams.get('utm_campaign') || '';
        utmParameters['str_utm_term'] = urlParams.get('utm_term') || '';

        return utmParameters;
    }

    var tel = function (val) {
        return val.replace(/\D/g, '').length === 11 ? '(00) 00000-0000' : '(00) 00000-0009';
    };

    var options = {
        onKeyPress: function (val, e, field, options) {
            field.mask(tel.apply({}, arguments), options);
        }
    };

    $('#telefone').mask(tel, options);
    var botaoEnviar = document.getElementById("submitButton");
    botaoEnviar.addEventListener("click", function (e) {
        e.preventDefault();

        const nome = document.getElementById('nome').value;
        const empresa = document.getElementById('empresa').value;
        const cargo = document.getElementById('cargo__select').value;
        const area = document.getElementById('area__select').value;
        const num_funcionarios = document.getElementById('num_funcionarios').value;
        const telefone = document.getElementById('telefone').value;
        const desafio_empresa = document.getElementById('desafio_empresa__select').value;
        const email = document.getElementById('email').value;

        // Obter parâmetros UTM da URL
        const utmParameters = getUTMParameters();

        const telLimpo = telefone.replace(/\D/g, '');
        const telCompleto = '55' + telLimpo;

        // Obter a data e hora atual
        let dataHoraAtual = new Date();

        // Formatar a data e hora no padrão brasileiro
        let dataHoraFormatada = new Date().toLocaleString('pt-BR');

        if (
            nome === "" ||
            nome === undefined ||
            empresa === "" ||
            empresa === undefined ||
            cargo === "" ||
            cargo === undefined ||
            area === "" ||
            area === undefined ||
            telefone === "" ||
            telefone === undefined ||
            num_funcionarios === "" ||
            num_funcionarios === undefined ||
            desafio_empresa === ""
        ) {
            alert('Preencha todos os campos.');
        } else {
            // Mesclar os parâmetros UTM com os outros dados
            const data = JSON.stringify({
                str_lp_name: "Ebook tendências Benefícios",
                str_user_name: nome,
                str_company_name: empresa,
                str_email: email,
                str_business_unit: area,
                str_form_job: cargo,
                str_user_challenge: desafio_empresa,
                nr_phone: telCompleto,
                dt_created_date: dataHoraFormatada,
                str_employees_number: num_funcionarios,
                ...utmParameters // Inclui os parâmetros UTM mapeados corretamente
            });

            fetch("https://cloud.fala.caju.com.br/79490316949496", { method: 'POST', body: data })
                    .then((response) => response.json())
                .then((resposta) => {
                    if (resposta.statusCode === 200) {
                    dataLayer.push({'event': '003/001-001.059:018;001'});
                        window.location.href = "http://cloud.fala.caju.com.br/obrigado";
                        
                    } else {
                        alert('Erro ao inserir dados.');
                    }
                });
        }
    });
</script>
</body>
</html>
